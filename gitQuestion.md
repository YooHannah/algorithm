# git 分支处理
## 背景
A同学提交了两次代码，但在第二次提交代码前，B同学有提交自己的代码，并且在合并代码时，
将A同学第一次提交的代码merge丢弃了，导致A同学第一次代码无法合并到主分支

## 原理知识
git reset 可以撤销commit命令的提交
git rebase 把分叉提交历史'整理'成一条直线
git stash 可以把工作现场'储藏起来'，等以后恢复现场后可以继续工作

## 分析
在分支代码处理时，A同学本地有主分支host(公共分支)和自己的本地分支local，
工作流程是
在自己本地分支local分支开发完毕后，
切换host分支，git pull 拉取远端分支更新后，
将本地分支local合并merge到host分支
然后git push到远端

而B同学直接在本地的主分支(公共分支)开发，git push时冲突，
git pull 拉取远端A同学第一次的代码时，直接将代码变更进行了丢弃
然后push了自己的代码到远端分支

A同学第二次提交时，并不知道B同学丢弃了自己第一次提交的代码，
在进行第二次提交时，在host上拉取远程更新之后，
继续合并推送最终结果就是自己的第一次代码丢失了

## 解决
利用A同学本地分支local没有合并远程分支的间隙,将A同学的两次提交保存下来，回到两次提交前的状态
然后拉取B同学的提交，再将A同学的两次提交拿出来进行合并，这样就可以实现三次提交都保存下来，再提交到远端

在A同学的本地分支进行操作
```
1.在主分支host上取消第二次提交
git reset --hard HEAD~1

2.将远端第二次提交撤销掉,让分支保留在B同学提交的状态
git push --force

3.切换本地分支local,回滚版本到两次提交前
git reset HEAD^^ 

4.保存两次提交 可以通过git stash list查看保存状态
git stash 
git stash list

5. 合并主分的B同学的提交到本地分支local,这时本地分支就有B同学的代码变更了
6. 取出A同学的两次提交,与B同学代码进行提交
git stash pop
7. 切换主分支host,合并本地分支local,推送到远端

```
